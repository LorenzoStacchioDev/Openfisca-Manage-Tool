#:kivy 1.10.0
#: import utils kivy.utils

<ReformsScreen>:
    name: "reforms"
    BoxLayout:
        orientation: "vertical"
        GridLayout:
            cols: 2
            rows: 3
            orientation: "horizontal"
            Button:
                id: button_add_variable
                text: "Add variable"
                on_press: root.go_to_add_variable()
            Button:
                id: button_update_variable
                text: "Update variable"
                on_press: root.go_to_update_variable()
            Button:
                id: button_neutralize_variable
                text: "Neutralize variable"
                on_press: root.go_to_neutralize_variable()
            Button:
                id: button_add_parameter
                text: "Add parameter"
            Button:
                id: button_modify_parameter
                text: "Modify variable"
            Button:
                id: button_make_reform
                text: "Make reform"
        Button:
            size_hint: (1.0,0.2)
            text: 'Come back to home'
            background_color: hex('971640')
            on_press: root.go_to_home()

<SelectVariableScreen>
    name: "select_variable_screen"
    BoxLayout:
        orientation: "vertical"
        Spinner
            id: id_spinner_select_variable_screen
            size_hint: (0.8,None)
            pos_hint: {'center_x': .5, 'center_y': .5}
        BoxLayout:
            orientation: "horizontal"
            Button:
                size_hint: (1.0,0.2)
                text: 'Select'
                background_color: hex('971640')
                on_press: root.select_variable()
            Button:
                size_hint: (1.0,0.2)
                text: 'Come back to home'
                background_color: hex('971640')
                on_press: root.go_to_home()

<FormVariableScreen>:
    name: "form_variable_screen"

    BoxLayout:
        orientation: "vertical"
        BoxLayout:
            padding: (30,30,30,0)
            orientation: "horizontal"
            Label:
                text: "Name"
                size_hint:(0.3,1)
            TextInput:
                id: name_input
                multiline: False
                size_hint:(0.7,1)

        BoxLayout:
            padding: (30,30,30,0)
            orientation: "horizontal"
            Label:
                text: "Value type"
                size_hint:(0.3,1)
            Spinner:
                id: value_type_input
                size_hint:(0.7,1)

        BoxLayout:
            padding: (30,30,30,0)
            orientation: "horizontal"
            Label:
                text: "Entity"
                size_hint:(0.3,1)
            Spinner:
                id: entity_input
                #multiline: False
                size_hint:(0.7,1)

        BoxLayout:
            padding: (30,30,30,0)
            orientation: "horizontal"
            Label:
                text: "Set input period"
                size_hint:(0.3,1)
            Spinner:
                id: set_input_period
                size_hint:(0.7,1)

        BoxLayout:
            padding: (30,30,30,0)
            orientation: "horizontal"
            Label:
                text: "Label"
                size_hint:(0.3,1)
            TextInput:
                id: label_input
                multiline: False
                size_hint:(0.7,1)

        BoxLayout:
            padding: (30,30,30,0)
            orientation: "horizontal"
            Label:
                text: "Definition period"
                size_hint:(0.3,1)
            Spinner:
                id: definition_period_input
                #values: ["MONTH","YEAR","ETERNITY"]
                size_hint:(0.7,1)

        BoxLayout:
            padding: (30,30,30,0)
            orientation: "horizontal"
            Label:
                text: "Reference"
                size_hint:(0.3,1)
            TextInput:
                id: reference_input
                multiline: False
                size_hint:(0.7,1)

        BoxLayout:
            padding: (30,30,30,0)
            orientation: "horizontal"
            Label:
                text: "Formula"
                size_hint:(0.3,1)
            Button:
                text: "Click to visualize the code of the formula"
                id: watch_formula
                on_press: root.create_pop_up_watch_formula()
                size_hint:(0.35,1)
            Button:
                text: "Click to modify the actual code of the formula"
                id: modify_formula
                on_press: root.create_pop_up_modify_formula()
                size_hint:(0.35,1)

        BoxLayout:
            padding: (0,30,0,0)
            orientation: "horizontal"
            Button:
                text: "Run operation"
                background_color: hex('971640')
                on_press: root.run_operation()
            Button:
                text: "Come back to home"
                on_press: root.go_to_home()
                background_color: hex('971640')


<WatchingFormulaPopUp>:
    size_hint: 0.8,0.8
    title: "Formula code"
    BoxLayout:
        orientation:'vertical'
        RstDocument:
            id: formula_view_from_update
        Button:
            text:"Close this popup"
            size_hint: 1,0.1
            on_press:root.dismiss()


<ModifyFormulaPopup>:
    size_hint: 0.8,0.8
    title: "Formula code"
    BoxLayout:
        orientation:'vertical'
        TextInput:
            id: txt_modify_formula
            multiline: True
            size_hint:(1,1)
        Button:
            text:"Click if you finish to modify the formula"
            size_hint: 1,0.1
            on_press:root.dismiss(), root.update_lines_basing_on(root.ids.txt_modify_formula.text)
